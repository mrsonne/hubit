
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.2.5">
    
    
      
        <title>Hubit Docs</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.2d9f7617.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL(".",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#hubit-a-calculation-hub" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        <aside class="md-banner md-banner--warning">
          
        </aside>
      </div>
    
    

      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="Hubit Docs" class="md-header__button md-logo" aria-label="Hubit Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Hubit Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              First steps
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
<p style="color:RGBA(0,0,0,.3); font-size: 10px; padding-left: 10px">
    Page built on Mar 17 2022 for version 0.5.0.
</p>

    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="Hubit Docs" class="md-nav__button md-logo" aria-label="Hubit Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Hubit Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          First steps
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="index.html" class="md-nav__link md-nav__link--active">
        First steps
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#at-a-glance" class="md-nav__link">
    At a glance
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#motivation" class="md-nav__link">
    Motivation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#teaser" class="md-nav__link">
    Teaser
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation-requirements" class="md-nav__link">
    Installation &amp; requirements
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Examples" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="examples.html" class="md-nav__link">
        Summary
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="example-car.html" class="md-nav__link">
        Car
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="example-wall.html" class="md-nav__link">
        Wall
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="example-tanks.html" class="md-nav__link">
        Tanks
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Code Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Code Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Code Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="hubit-reference.html" class="md-nav__link">
        Hubit
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="config-reference.html" class="md-nav__link">
        Config & data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="log-reference.html" class="md-nav__link">
        Log
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="changelog.html" class="md-nav__link">
        Change log
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#at-a-glance" class="md-nav__link">
    At a glance
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#motivation" class="md-nav__link">
    Motivation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#teaser" class="md-nav__link">
    Teaser
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation-requirements" class="md-nav__link">
    Installation &amp; requirements
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<p>﻿<a href="https://travis-ci.com/mrsonne/hubit"><img alt="Build Status" src="https://travis-ci.com/mrsonne/hubit.svg?branch=master" /></a>
<a href="https://coveralls.io/github/mrsonne/hubit?branch=master"><img alt="Coverage Status" src="https://coveralls.io/repos/github/mrsonne/hubit/badge.svg?branch=master" /></a>
<a href="https://github.com/ambv/black"><img alt="Code style: black" src="https://img.shields.io/badge/code%20style-black-000000.svg" /></a>
<a href="https://pypi.python.org/pypi/hubit/"><img alt="Version" src="https://img.shields.io/pypi/v/hubit.svg" /></a>
<a href="https://pypi.python.org/pypi/hubit/"><img alt="Python versions" src="https://img.shields.io/pypi/pyversions/hubit.svg" /></a>
<a href="https://github.com/mrsonne/hubit/actions/workflows/docs.yml"><img alt="Docs" src="https://github.com/mrsonne/hubit/actions/workflows/docs.yml/badge.svg" /></a>
<a href="https://github.com/mrsonne/hubit/blob/master/.travis.yml"><img alt="CI/CD" src="https://img.shields.io/badge/Travis-file-blue" /></a></p>
<h1 id="hubit-a-calculation-hub">hubit - a calculation hub</h1>
<h2 id="at-a-glance">At a glance</h2>
<p><code>Hubit</code> is an event-driven orchestration hub for your existing calculation tools. It allows you to</p>
<ul>
<li>execute calculation tools as one <code>Hubit</code> composite model with a loose coupling between the model components,</li>
<li>centrally configure the interfaces between calculation tools rather than coding them. This allows true separation of responsibility between different teams,</li>
<li>easily run your existing calculation tools asynchronously in multiple processes,</li>
<li>query the <code>Hubit</code> model for specific results thus avoiding explicitly coding (fixed) call graphs and running superfluous calculations,</li>
<li>make parameter sweeps,</li>
<li>feed previously calculated results into new calculations thus augmenting old results,</li>
<li>store results incrementally during execution and restart from previously stored results (model caching),</li>
<li>reuse results if calculations are executed multiple times with the same input (component caching),</li>
<li>visualize your <code>Hubit</code> composite model i.e. visualize your existing tools and the attributes that flow between them.</li>
</ul>
<h2 id="motivation">Motivation</h2>
<p>Many work places have developed a rich ecosystem of stand-alone tools. These tools may be developed/maintained by different teams using different programming languages and using different input/output data models. Nevertheless, the tools often depend on results provided the other tools leading to complicated dependencies and error-prone (manual) workflows involving copy &amp; paste. If this sounds familiar you should try <code>Hubit</code>.</p>
<p>By defining input and results data structures that are shared between your tools <code>Hubit</code> allows all your Python-wrappable tools to be seamlessly executed asynchronously as a single model. Asynchronous multi-processor execution often assures a better utilization of the available CPU resources compared to sequential single-processor execution. This is especially true when some time is spent in each component i.e. for CPU bound calculations. In practice this performance improvement often compensates the management overhead introduced by <code>Hubit</code>.
Executing a fixed call graph is faster than executing the dynamically created call graph created automatically by <code>Hubit</code>. Nevertheless, a fixed call graph will typically always encompass all relevant calculations and provide all results, which in many cases will represent wasteful compute since only a subset of the results are actually needed. <code>Hubit</code> dynamically creates the smallest possible call graph that can provide the results that satisfy the user's query. Further, <code>Hubit</code> can visualize your existing tools and the data flow between them.</p>
<h2 id="teaser">Teaser</h2>
<p>The example below is taken from the <a href="https://mrsonne.github.io/hubit/example-car.html">in-depth tutorial</a>, in the documentation.</p>
<p>To get results from a <code>Hubit</code> model requires you to submit a <em>query</em>, which tells <code>Hubit</code> what attributes from the results data structure you want to have calculated. After <code>Hubit</code> has processed the query, i.e. executed relevant components, the values of the queried attributes are returned in the <em>response</em>.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Load model from file</span>
<span class="n">hmodel</span> <span class="o">=</span> <span class="n">HubitModel</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span>
  <span class="s1">&#39;model1.yml&#39;</span><span class="p">,</span>
  <span class="n">name</span><span class="o">=</span><span class="s1">&#39;car&#39;</span>
<span class="p">)</span>

<span class="c1"># Load the input</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;input.yml&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
    <span class="n">input_data</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span> <span class="n">Loader</span><span class="o">=</span><span class="n">yaml</span><span class="o">.</span><span class="n">FullLoader</span><span class="p">)</span>

<span class="c1"># Set the input on the model object</span>
<span class="n">hmodel</span><span class="o">.</span><span class="n">set_input</span><span class="p">(</span><span class="n">input_data</span><span class="p">)</span>

<span class="c1"># Query the model</span>
<span class="n">query</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;cars[0].price&#39;</span><span class="p">]</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">hmodel</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
</code></pre></div>
<p>The response looks like this</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="s1">&#39;cars[0].price&#39;</span><span class="p">:</span> <span class="mf">4280.0</span><span class="p">}</span>
</code></pre></div>
<p>A query for parts prices for all cars looks like this</p>
<div class="highlight"><pre><span></span><code><span class="n">query</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;cars[:].parts[:].price&#39;</span><span class="p">]</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">hmodel</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
</code></pre></div>
<p>and the corresponding response is</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="s1">&#39;cars[:].parts[:].price&#39;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">[</span><span class="mf">480.0</span><span class="p">,</span> <span class="mf">1234.0</span><span class="p">,</span> <span class="mf">178.0</span><span class="p">,</span> <span class="mf">2343.0</span><span class="p">,</span> <span class="mf">45.0</span><span class="p">],</span>
    <span class="p">[</span><span class="mf">312.0</span><span class="p">,</span> <span class="mf">1120.0</span><span class="p">,</span> <span class="mf">178.0</span><span class="p">,</span> <span class="mf">3400.0</span><span class="p">]</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<p>From the response we can see the prices for the five parts that comprise the first car and the prices for the four parts that comprise the second car. The full example illustrates how a second calculation component can be used to calculate the total price for each car.</p>
<p><code>Hubit</code> can render models and queries. In the example below we have rendered the query <code>cars[0].price</code> i.e. the price of the car at index 0 using</p>
<div class="highlight"><pre><span></span><code><span class="n">query</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;cars[0].price&#39;</span><span class="p">]</span>
<span class="n">hmodel</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
</code></pre></div>
<p>which yields the graph shown below.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/mrsonne/hubit/blob/master/examples/car/images/query_car_2.png">
  <img src="https://github.com/mrsonne/hubit/raw/master/examples/car/images/query_car_2.png" width="1000" style="max-width:100%;">
</a></p>
<p>The graph illustrates nodes in the input data structure, nodes in the the results data structure, the calculation components involved in creating the response as well as hints at which attributes flow in and out of these components.</p>
<h2 id="installation-requirements">Installation &amp; requirements</h2>
<p>Install from pypi</p>
<div class="highlight"><pre><span></span><code>pip install hubit
</code></pre></div>
<p>Install from GitHub</p>
<div class="highlight"><pre><span></span><code>pip install git+git://github.com/mrsonne/hubit.git
</code></pre></div>
<p>To render <code>hubit</code> models and queries you need to install Graphviz (<a href="https://graphviz.org/download/">https://graphviz.org/download/</a>). On e.g. Ubuntu, Graphviz can be installed using the command</p>
<div class="highlight"><pre><span></span><code>sudo apt install graphviz
</code></pre></div>

              
            </article>
          </div>
        </div>
        
      </main>
      

    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": ".", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "assets/javascripts/workers/search.bd0b6b67.min.js", "version": "0.5.0"}</script>
    
    
      <script src="assets/javascripts/bundle.467223ff.min.js"></script>
      
    
  </body>
</html>